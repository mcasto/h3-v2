import{Q as n}from"./QToolbarTitle.e4028a64.js";import{Q as p}from"./QToolbar.2e611446.js";import{Q as h}from"./QInput.0783992a.js";import{Q as g}from"./QUploader.926315d0.js";import{Q as u}from"./QImg.2ace3909.js";import{_ as Q,K as _,cj as b,ck as v,ag as C,M as V,y as w,z as x,B as t,C as a,F as y,L as i,A as s,Q as d,G as f,H as I}from"./index.0f6227c2.js";import{Q as U}from"./QCard.ca785a3c.js";import{Q as k}from"./QDialog.78957ec9.js";import{t as N,Q as T}from"./admin-editor-toolbar.c04b3c1b.js";import{Q as B}from"./QForm.f9eafa14.js";import{I as E}from"./ImageUploadHeader.5b05674c.js";import"./use-key-composition.86f1530a.js";import"./use-dark.95ee2633.js";import"./uid.42677368.js";import"./format.5d379463.js";import"./use-tick.ca603a49.js";import"./QMenu.9ddf5c1d.js";import"./QItem.b5b79933.js";import"./QTooltip.eb0978dd.js";import"./use-fullscreen.f10d4068.js";const P={name:"AdminEditPhoto",components:{ImageUploadHeader:E},data:()=>({viewCurrentImage:!1}),computed:{..._(i,["token"]),...b(i,["photos"]),photo(){let e=this.photos.filter(({id:o,temp_id:m})=>o==this.$route.params.id||m==this.$route.params.id);return e=e.length>0?e.shift():!1,e},buttonText(){return isNaN(v.exports.toNumber(this.$route.params.id))?"Create":"Update"}},methods:{...C(i,["upsertRec"])},created(){this.toolbar=N()}},q=s("div",null," Edit Photo ",-1),A={class:"flex row"},D={class:"flex row justify-center q-gutter-x-lg q-mt-lg"},S={class:"flex row q-mt-lg"},$={class:"flex row q-my-lg"},F={class:"col-11 text-right"};function j(e,o,m,H,R,r){const c=V("image-upload-header");return w(),x(y,null,[t(p,null,{default:a(()=>[t(n,null,{default:a(()=>[q]),_:1})]),_:1}),t(B,null,{default:a(()=>[s("div",A,[t(h,{class:"col-10 offset-1",type:"text",label:"Name",modelValue:r.photo.name,"onUpdate:modelValue":o[0]||(o[0]=l=>r.photo.name=l)},null,8,["modelValue"])]),s("div",D,[t(g,{label:"Photo",accept:"image/*",url:`/api/upload-image/${e.token}/photos/${e.$route.params.id}`},{header:a(l=>[t(c,{scope:l},null,8,["scope"])]),_:1},8,["url"]),t(d,{icon:"visibility",label:"View Current Image",onClick:o[1]||(o[1]=l=>e.viewCurrentImage=!0)},{default:a(()=>[t(u,{src:r.photo.file_location},null,8,["src"])]),_:1})]),t(k,{modelValue:e.viewCurrentImage,"onUpdate:modelValue":o[2]||(o[2]=l=>e.viewCurrentImage=l)},{default:a(()=>[t(U,{style:{width:"750px","max-height":"80vh"}},{default:a(()=>[t(u,{src:r.photo.file_location},null,8,["src"])]),_:1}),t(d,{icon:"cancel",style:{position:"relative",top:"-38vh"},flat:"",round:"",color:"white",class:"bg-transparent"})]),_:1},8,["modelValue"]),s("div",S,[t(p,{class:"offset-1 col-10 bg-grey-3"},{default:a(()=>[t(n,null,{default:a(()=>[f(" Description ")]),_:1})]),_:1}),t(T,{class:"offset-1 col-10",label:"Description",definitions:{update:{tip:"Update",icon:"cloud_upload",handler:e.updateContents}},toolbar:e.toolbar,modelValue:r.photo.description,"onUpdate:modelValue":o[3]||(o[3]=l=>r.photo.description=l)},null,8,["definitions","toolbar","modelValue"])]),s("div",$,[s("div",F,[t(d,{onClick:o[4]||(o[4]=l=>e.upsertRec("photos",r.photo,"Photo Updated"))},{default:a(()=>[f(I(r.buttonText),1)]),_:1})])])]),_:1})],64)}var mt=Q(P,[["render",j]]);export{mt as default};
