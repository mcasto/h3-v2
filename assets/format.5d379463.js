import{o as S,a0 as h,a1 as a,s as n,U as E,a2 as P}from"./index.0f6227c2.js";import{e as H,d as q,i as x}from"./use-tick.ca603a49.js";function A(t,e,r){let o;function l(){o!==void 0&&(h.remove(o),o=void 0)}return S(()=>{t.value===!0&&l()}),{removeFromHistory:l,addToHistory(){o={condition:()=>r.value===!0,handler:e},h.add(o)}}}let c=0,p,v,d,w=!1,m,y,g,s=null;function B(t){z(t)&&E(t)}function z(t){if(t.target===document.body||t.target.classList.contains("q-layout__backdrop"))return!0;const e=P(t),r=t.shiftKey&&!t.deltaX,o=!r&&Math.abs(t.deltaX)<=Math.abs(t.deltaY),l=r||o?t.deltaY:t.deltaX;for(let f=0;f<e.length;f++){const i=e[f];if(x(i,o))return o?l<0&&i.scrollTop===0?!0:l>0&&i.scrollTop+i.clientHeight===i.scrollHeight:l<0&&i.scrollLeft===0?!0:l>0&&i.scrollLeft+i.clientWidth===i.scrollWidth}return!0}function b(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function u(t){w!==!0&&(w=!0,requestAnimationFrame(()=>{w=!1;const{height:e}=t.target,{clientHeight:r,scrollTop:o}=document.scrollingElement;(d===void 0||e!==window.innerHeight)&&(d=r-e,document.scrollingElement.scrollTop=o),o>d&&(document.scrollingElement.scrollTop-=Math.ceil((o-d)/8))}))}function T(t){const e=document.body,r=window.visualViewport!==void 0;if(t==="add"){const{overflowY:o,overflowX:l}=window.getComputedStyle(e);p=H(window),v=q(window),m=e.style.left,y=e.style.top,g=window.location.href,e.style.left=`-${p}px`,e.style.top=`-${v}px`,l!=="hidden"&&(l==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),o!=="hidden"&&(o==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,a.is.ios===!0&&(r===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",u,n.passiveCapture),window.visualViewport.addEventListener("scroll",u,n.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",b,n.passiveCapture))}a.is.desktop===!0&&a.is.mac===!0&&window[`${t}EventListener`]("wheel",B,n.notPassive),t==="remove"&&(a.is.ios===!0&&(r===!0?(window.visualViewport.removeEventListener("resize",u,n.passiveCapture),window.visualViewport.removeEventListener("scroll",u,n.passiveCapture)):window.removeEventListener("scroll",b,n.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=m,e.style.top=y,window.location.href===g&&window.scrollTo(p,v),d=void 0)}function C(t){let e="add";if(t===!0){if(c++,s!==null){clearTimeout(s),s=null;return}if(c>1)return}else{if(c===0||(c--,c>0))return;if(e="remove",a.is.ios===!0&&a.is.nativeMobile===!0){s!==null&&clearTimeout(s),s=setTimeout(()=>{T(e),s=null},100);return}}T(e)}function W(){let t;return{preventBodyScroll(e){e!==t&&(t!==void 0||e===!0)&&(t=e,C(e))}}}const L=["B","KB","MB","GB","TB","PB"];function X(t){let e=0;for(;parseInt(t,10)>=1024&&e<L.length-1;)t/=1024,++e;return`${t.toFixed(1)}${L[e]}`}function Y(t,e,r){return r<=e?e:Math.min(r,Math.max(e,t))}function $(t,e,r){if(r<=e)return e;const o=r-e+1;let l=e+(t-e)%o;return l<e&&(l=o+l),l===0?0:l}function F(t,e=2,r="0"){if(t==null)return t;const o=""+t;return o.length>=e?o:new Array(e-o.length+1).join(r)+o}export{W as a,Y as b,X as h,$ as n,F as p,A as u};
